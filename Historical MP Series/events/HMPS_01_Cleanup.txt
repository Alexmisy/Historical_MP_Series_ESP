namespace = hmps_cleanup

hmps_cleanup.1 = {
	type = country_event

	title = hmps_cleanup.1.t
	desc = hmps_cleanup.1.d
	flavor = hmps_cleanup.1.f

	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	duration = 3
	
	trigger = {
		is_player = no
	}

	option = {
		name = hmps_cleanup.1.a
        default_option = yes

        every_country = {
			every_scope_state = {
				limit = {
					is_slave_state = yes
					NOT = {
						has_modifier = slave_state_migration_debuff
					}
				}
				add_modifier = {
					name = slave_state_migration_debuff
				}
			}
		}
		every_country = {
			every_scope_state = {
				limit = {
					is_slave_state = no
				}
				remove_modifier = slave_state_migration_debuff
			}
		}
	}
}


# Event that removes potato blight modifier in case the state was conquered while only one party has the JE

hmps_cleanup.2 = {
	type = country_event

	title = hmps_cleanup.2.t
	desc = hmps_cleanup.2.d
	flavor = hmps_cleanup.2.f

	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	duration = 3
	
	trigger = {
		is_player = no
		has_global_variable = potato_blight_over
		NOT = { has_journal_entry = je_potato_blight }
		game_date < 1860.1.1
		any_scope_state = {
			has_modifier = potato_blight
		}
	}
	
	option = {
		name = hmps_cleanup.1.a
		
		every_scope_state = {
			limit = {
				has_modifier = potato_blight
			}
			remove_modifier = potato_blight
		}
		if = {
			limit = {
				any_scope_state = {
					has_modifier = irish_famine
				}
			}
			every_scope_state = {
				limit = {
					has_modifier = irish_famine
				}
				remove_modifier = irish_famine
			}
		}
	}
}