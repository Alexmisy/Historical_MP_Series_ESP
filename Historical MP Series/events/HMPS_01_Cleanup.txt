namespace = hmps_cleanup

hmps_cleanup.1 = {
	type = country_event

	title = hmps_cleanup.1.t
	desc = hmps_cleanup.1.d
	flavor = hmps_cleanup.1.f

	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	duration = 3
	
	trigger = {
		is_player = no
	}

	option = {
		name = hmps_cleanup.1.a
        default_option = yes

        every_country = {
			every_scope_state = {
				limit = {
					is_slave_state = yes
					NOT = {
						has_modifier = slave_state_migration_debuff
					}
				}
				add_modifier = {
					name = slave_state_migration_debuff
				}
			}
		}
		every_country = {
			every_scope_state = {
				limit = {
					is_slave_state = no
				}
				remove_modifier = slave_state_migration_debuff
			}
		}
	}
}
